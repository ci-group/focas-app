<html>
<head>
	<meta charset="utf-8">
    <!-- Mobile viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; target-densityDpi=device-dpi">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>FoCAS | Fundamentals of Collective Adaptive Systems</title>
    <meta name="keywords" content="" />

	<link rel="stylesheet" href="themes/gray-blue-pink.css" />
	<link rel="stylesheet" href="styles/jquery.mobile.icons-1.4.4.css" />
	<link rel="stylesheet" href="styles/jquery.mobile.structure-1.4.4.css" />
    <link rel="stylesheet" href="styles/jquery-ui.css" />
    <link rel="stylesheet" href="styles/jquery-ui.structure.css" />
    <link rel="stylesheet" href="styles/jquery-ui.theme.css" />
    <link rel="stylesheet" href="css/index.css" />
</head>
<body>
	<div data-role="page" data-theme="a">
		<div data-role="header" data-position="inline">
			<h1>Fundamentals of Collective Adaptive Systems</h1>
		</div>
		<div data-role="content" data-theme="a" id="main">
            <div class="video" data-file="FoCAS-Promotional-Film-HD.mp4">
                <h3>FoCAS Promotional Film</h3>
            </div>
            
            <div class="video" data-file="blahblahblah.mp4">
                <h3>Does not exist</h3>
            </div>
            
            <div class="pdf" data-file="adaptive-collective-systems/adaptive-collective-systems.pdf">
                <h3>The book</h3>
            </div>
            
            <div data-role="popup" id="progress-dialog" data-overlay-theme="a" data-theme="a" data-dismissible="false" class="ui-corner-all" >
                <div data-role="header" data-theme="a" class="ui-corner-top">
                    <h1>Downloading</h1>
                </div>
                <div data-role="content" data-theme="a" id="progress-bar" class="ui-corner-bottom ui-content">
                </div>
            </div>
            
            <div data-role="popup" id="cannotDownloadDialog" data-overlay-theme="e" data-theme="e" data-dismissible="false" class="ui-corner-all" >
                <div data-role="header" data-theme="e" class="ui-corner-top">
                    <h1>Could not download file.</h1>
                </div>
                <div data-role="content" data-theme="e" class="ui-corner-bottom ui-content">
                    <h3 class="ui-title">Could not download file.</h3>
                    <p>This file cannot be downloaded from the server. Please try again later.</p>
                    <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="e">Ok</a>
                </div>
            </div>
		</div>
	</div>
    
    <div data-role="page" data-theme="a" id="video">
        <div data-role="header" data-position="inline" data-add-back-btn="true">
            <h1>Video</h1>
        </div>
        <div data-role="content" data-theme="a" id="video-embed">
        </div>
    </div>
    
    <div data-role="page" data-theme="a" id="pdf">
        <div data-role="header" data-position="inline" data-add-back-btn="true">
            <h1>Article</h1>
        </div>
        <div data-role="content" data-theme="a" id="pdf-embed">
            <object id="pdf-object" data="pdf/adaptive-collective-systems/adaptive-collective-systems.pdf" type="application/pdf">
        </div>
    </div>
    
    <script src="javascript/jquery-1.11.1.js"></script>
    <script src="javascript/jquery-ui.js"></script>
    <script src="javascript/jquery.mobile-1.4.4.js"></script>
    <script src="cordova.js"></script>
    <script src="javascript/jCProgress-1.0.3.js"></script>
    <script src="javascript/utils.js"></script>
    <script src="javascript/index.js"></script>
    <script>
        $(document).bind("pageinit", function(){
                 $(".video").bind("vclick", function ( ) {
                      console.log("file: "+$(this).attr('data-file'));
                                  
                      utilities.checkAndDownload($(this).attr('data-file'),"video/",
                         function(file, fileUrl) {
                             utilities.embedVideo(file, fileUrl);
                            $.mobile.pageContainer.pagecontainer("change","#video");
                         },
                         function() {
                            $("#progress-dialog").on("popupafterclose", function () {
                                 $("#cannotDownloadDialog").popup("open");
                            });
                            $( "#progress-dialog" ).popup("close");
                          });
                 });
                 
                 $(".pdf").bind("vclick", function ( ) {
                        console.log("file: "+$(this).attr('data-file'));
                        $('pdf-object').attr('data',"pdf/"+$(this).attr('data-file'));
                        
                        $.mobile.pageContainer.pagecontainer("change","#pdf");
                });
         });
    </script>
    
</body>
</html>